<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://vdanen.github.io/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://vdanen.github.io/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Vincent Danen" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="fedora, ipa, vmware, Linux, " />

<meta property="og:title" content="Upgrading and Installing Fedora 18 in VMware Fusion "/>
<meta property="og:url" content="https://vdanen.github.io/blog/upgrading-and-installing-fedora-18-in-vmware-fusion.html" />
<meta property="og:description" content="I was thoroughly excited about Fedora 18 until I actually went to install it. I use Fedora 17 on a laptop and a desktop, but I also have copies in virtual machines that I use for testing -- these virtual machines run in VMware Fusion on my Mac Pro. So never …" />
<meta property="og:site_name" content="Annvix" />
<meta property="og:article:author" content="Vincent Danen" />
<meta property="og:article:published_time" content="2013-02-02T10:00:00-07:00" />
<meta name="twitter:title" content="Upgrading and Installing Fedora 18 in VMware Fusion ">
<meta name="twitter:description" content="I was thoroughly excited about Fedora 18 until I actually went to install it. I use Fedora 17 on a laptop and a desktop, but I also have copies in virtual machines that I use for testing -- these virtual machines run in VMware Fusion on my Mac Pro. So never …">

        <title>Upgrading and Installing Fedora 18 in VMware Fusion  · Annvix
</title>
        <link href="https://vdanen.github.io/recent.atom" type="application/atom+xml" rel="alternate" title="Annvix - Full Atom Feed" />



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://vdanen.github.io/"><span class=site-name>Annvix</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://vdanen.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://vdanen.github.io/about.html">About</a></li>
                                <li ><a href="https://vdanen.github.io/documentation.html">Documentation</a></li>
                                <li ><a href="https://vdanen.github.io/categories.html">Categories</a></li>
                                <li ><a href="https://vdanen.github.io/tags.html">Tags</a></li>
                                <li ><a href="https://vdanen.github.io/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="https://vdanen.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://vdanen.github.io/blog/upgrading-and-installing-fedora-18-in-vmware-fusion.html">
                Upgrading and Installing Fedora 18 in VMware Fusion
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p>I was thoroughly excited about Fedora 18 until I actually went to install it.  I use Fedora 17 on a laptop and a desktop, but I also have copies in virtual machines that I use for testing -- these virtual machines run in VMware Fusion on my Mac Pro.  So never having used Fedora 18 during any of the betas or anything, first thing I did was try to install it in VMware.</p>
<p>A few times.</p>
<p>First I have to say that I'm not a big fan of the new Anaconda UI.  One of the things I appreciated about Anaconda in the past is that it was easy to use, but didn't prevent me from doing "power things", like partitioning disks the way I wanted to partition them.  This seems to no longer be the case, and Anaconda does a lot of hand-holding.  It has been a habit to go through the list of packages to be installed (select a group, then go through and weed out the stuff I don't want), so things I don't want don't even touch the disk.  Doesn't seem like I can do this anymore either.  I don't agree with some reviewers who seem to think the UI change is to make it look/feel more mobile or "touchscreen-like", but I do feel it's dumbed down quite a bit which makes me unhappy.  I lived with it, until trying to change the partition layout killed Anaconda.  Twice.  After that I decided to let it do what it wanted since it was just a VM and I didn't care enough to fight it.</p>
<p>So Fedora gets installed and lo!  A nice blue screen where I can do absolutely <i>nothing</i>.  No icons, no text, no login box, nothing.  Afterwards I read this has to do with having 3D graphics enabled in VMware (but at that point I had already reinstalled to use LXDE rather than GNOME, so I've not tried anything regarding that, however I did find <a href="http://www.greebo.net/2013/01/18/installing-fedora-18-rtm-to-vmware-fusion-5-or-vmware-workstation-9/">this blog posting about Fedora 18 in VMware Fusion 5/VMware Workstation 9</a> which explains things a bit).</p>
<p>On my home network I run IPA on Red Hat Enterprise Linux 6 to handle my Kerberos/LDAP auth duties.  This means when I install an operating system, no matter what it is, I don't create local users.  So when I installed Fedora 18, I only have the root user and the rest come from IPA.  A few problems with that:</p>
<ul>
<li> Setting up IPA in Anaconda does not work
<li> Post-install, logging in as root at the GUI is not permitted
<li> I have a grub error on tty2, not a login (and nothing on tty3 for that matter)
<li> I have to reboot and edit grub to add <b>systemd.unit=multi-user.target</b> to boot into the console to get a tty (see <a href="http://fedoraproject.org/wiki/Systemd#Boot_Kernel_Command_Line">Systemd: Boot Kernel Command Line</a>)
<li> After I install freeipa-client, I can enroll in the domain
<li> SSSD is not enabled when you install it!  Once again I have to reboot to the console
<li> Enable SSSD and reboot, only to find that once again I cannot login as a user in the GUI (that I could login as on the console)
<li> Head-scratching moment when I realize I know next to nothing about systemd and can only conclude that perhaps NetworkManager starts upon login in the graphical boot and not at system start, which prevents SSSD from talking to IPA to confirm my login
<li> Looking at <i>/etc/sysconfig/network-scripts/ifup-eth0</i> tells me that perhaps that is not the case
<li> Big WTF moment and go to bed
</ul>

<p>Currently I am unhappy with Fedora 18.  I suppose that on bare metal it probably works better.  I also suppose that with a real user account it works better.  At this point I don't want to do yet another reinstall because then I have to remove the host from IPA and re-enroll, which is annoying (and I really don't want to revisit Anaconda either -- I'll get to do that when I create the 64bit Fedora 18 VM later).</p>
<p>Ok, after a few days I tried a few other things.  The first was getting rid of NetworkManager thinking that perhaps it would only start when I login (which I can't, if there is no network, because my login is IPA-based).  So I had to do:</p>
<pre>
# systemctl disable NetworkManager.service
# systemctl enable network.service
</pre>

<p>The most annoying thing, however, is that when I boot into graphical mode, I get no gettys.  I'm pretty sure I told systemd that I want three of them (I have three symlinks in /etc/systemd/system/getty.target.wants: getty@tty1.service through getty@tty3.service; sadly when I boot into graphical mode and switch to TTY2, I get a grub error message and nothing on TTY3... what the heck?)</p>
<p>Another thing I did was disable SELinux.  In multi-user.target, I can login as my IPA-user no problem.  With LXDM, however, I never could (assuming, perhaps incorrectly, that network initialization was delayed).  But upon further inspection I see a lot of:</p>
<pre>
lxdm-binary: pam_selinux(lxdm:session): Setting key creation contect guest_u:guest_r:oddjob_mkhomedir_t:s0 failed: Permission denied
</pre>

<p>I have zero interest and zero time in making SELinux work with LXDM and since this is a virtual machine, I don't care if SELinux is disabled.</p>
<p>Lo and behold, I can now log into LXDM.  In light of the SELinux thing, I'm thinking that NetworkManager is not to blame (silly me, I made two changes then rebooted -- it could be either one, but I strongly suspect SELinux).  Maybe it would have worked better with GNOME (will try that on the next VM I install).</p>
<p>On another side note, since I use VMWare Fusion for the VM, for the tools install (probably the same for the latest VMware Workstation as well, etc.), you may want to check out <a href="http://communities.vmware.com/message/2178685">this thread</a>.  In particular, seems like linux/version.h is missing and makes the tools angry.  The fix is easy though:</p>
<pre>
# cd /usr/src/kernels/[current_version]/include
# cp generated/uapi/linux/version.h linux/
</pre>

<p>Then you can compile the tools.  IIRC, you'll also <i>not</i> want to use the i686 PAE kernel (doesn't seem to work on older versions, I suspect the same may be true with F18).  Easy enough to yum remove the PAE kernels and install the regular kernel.  YMMV.</p>
<p>Finally, the next day I installed Fedora 18 64-bit in VMWare Fusion.  With the lessons learned above, it was a lot less painful.  I still am not a big fan of Anaconda... I like the look of it, but the practical "working" bits of it definitely need some work.  I don't like that you can pick only one group of packages.  What if I want both GNOME desktop and a working web server?  Doesn't seem like it can be done.  I also like picking through individual packages and sorely miss that -- makes for having to install a bunch of stuff later.  Also not sure why vim isn't installed by default... I think this is the first time ever I've seen "vim: command not found".</p>
<p>Also, despite getting the VMware tools installed, if you want GDM to present you with anything, you need to disable 3D graphics.  I have it enabled on my 32-bit VM (which is using LXDM, works fine), but on the 64-bit VM (using GDM), even with vmware-tools compiled and running, I needed to disable 3D graphic acceleration.  I suppose there is a bug in the driver and/or X there.  Not a big deal to disable since I've done "yum groupinstall 'MATE Desktop'" (what need do I have for 3D graphics?  BTW, MATE is <i>sweet</i>!) and now GDM loads.</p>
<p>IPA still would not work to configure from Anaconda.  Definitely a bug to be filed there.</p>
<p>Anyways, time to end this.  This entry has been in the works for about two weeks (sadly, I've not had time to finish it or get my Fedora VM's running until yesterday, and finished up the 64-bit install this morning).  So far the install of Fedora 18, in VMware, has been a bit of a PITA.  Next order of business is to see how the upgrade works... I've got a Fedora 17 install in Parallels to upgrade to make sure all my work-related bits work, before attempting to upgrade on bare metal.  I'm quite certain that a lot of this can be attributed to the virtual machines and it'll work better on bare metal.  I'm also happy that those won't be fresh installs, so I don't have to deal with Anaconda.</p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2013-02-02T10:00:00-07:00">Sat 02 February 2013</time>
            <h4>Category</h4>
            <a class="category-link" href="https://vdanen.github.io/categories.html#linux-ref">Linux</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://vdanen.github.io/tags.html#fedora-ref">fedora
                    <span class="superscript">15</span>
</a></li>
                <li><a href="https://vdanen.github.io/tags.html#ipa-ref">ipa
                    <span class="superscript">3</span>
</a></li>
                <li><a href="https://vdanen.github.io/tags.html#vmware-ref">vmware
                    <span class="superscript">2</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="https://twitter.com/vdanen" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Twitter" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1da1f3"/><path fill="#fff" d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
    </a>
    <a href="https://github.com/vdanen" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/vdanen/" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://infosec.exchange/@vdanen" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Mastodon" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%"/><path d="m409 290c-5 24-43 50-85 56-86 11-137-6-137-6 3 13-4 54 70 52 31 0 58-7 58-7l2 27c-51 24-107 15-140 6-67-17-79-90-81-162v-59c0-74 49-96 49-96 50-24 180-22 222 0 0 0 49 22 49 96 0 0 1 55-7 93" fill="#3088d4"/><path d="m358 202v91h-35v-88c0-18-8-27-23-27-18 0-27 11-27 33v47h-34v-47c0-22-9-33-27-33-15 0-23 9-23 27v88h-35v-91c0-18 5-60 52-60 39 0 50 37 50 37s10-37 50-37c45 0 52 42 52 60"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://vdanen.github.io/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>