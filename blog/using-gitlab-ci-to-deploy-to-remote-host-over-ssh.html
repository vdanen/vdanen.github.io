<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Using GitLab CI to deploy to remote host over ssh - Annvix</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="https://vdanen.github.io/images/favicon.ico" rel="icon">

<link rel="canonical" href="https://vdanen.github.io/blog/using-gitlab-ci-to-deploy-to-remote-host-over-ssh.html">

        <meta name="author" content="Vincent Danen" />
        <meta name="keywords" content="gitlab,ci,docker" />
        <meta name="description" content="I&#39;ve been using GitLab for a while now and I really like it. I can&#39;t objectively say whether it&#39;s better than GitHub or not (I have a few projects on GitHub but I rarely make any changes to them and even more rarely use the web UI), but one of …" />

        <meta property="og:site_name" content="Annvix" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Using GitLab CI to deploy to remote host over ssh"/>
        <meta property="og:url" content="https://vdanen.github.io/blog/using-gitlab-ci-to-deploy-to-remote-host-over-ssh.html"/>
        <meta property="og:description" content="I&#39;ve been using GitLab for a while now and I really like it. I can&#39;t objectively say whether it&#39;s better than GitHub or not (I have a few projects on GitHub but I rarely make any changes to them and even more rarely use the web UI), but one of …"/>
        <meta property="article:published_time" content="2016-12-08" />
            <meta property="article:section" content="Linux" />
            <meta property="article:tag" content="gitlab" />
            <meta property="article:tag" content="ci" />
            <meta property="article:tag" content="docker" />
            <meta property="article:author" content="Vincent Danen" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://vdanen.github.io/theme/css/bootstrap.slate.min.css" type="text/css"/>
    <link href="https://vdanen.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://vdanen.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://vdanen.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://vdanen.github.io/recent.atom" type="application/atom+xml" rel="alternate"
              title="Annvix ATOM Feed"/>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://vdanen.github.io/" class="navbar-brand">
<img class="img-responsive pull-left gap-right" src="https://vdanen.github.io/images/annvix.png" width="100"/>             </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://vdanen.github.io/about.html">
                             About
                          </a></li>
                         <li><a href="https://vdanen.github.io/documentation.html">
                             Documentation
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://vdanen.github.io/blog/using-gitlab-ci-to-deploy-to-remote-host-over-ssh.html"
                       rel="bookmark"
                       title="Permalink to Using GitLab CI to deploy to remote host over ssh">
                        Using GitLab CI to deploy to remote host over ssh
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
            <a href="https://vdanen.github.io/author/vincent-danen.html"><i class="fa fa-user"></i> Vincent Danen</a> &nbsp;&nbsp; // &nbsp;&nbsp;
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-12-08T18:00:00-07:00"> Thu 08 December 2016</time> &nbsp;&nbsp; // &nbsp;&nbsp;
    </span>


        <a href="https://vdanen.github.io/category/linux.html"><i class="fa fa-folder-open-o"></i> Linux</a> &nbsp;&nbsp; // &nbsp;&nbsp;


<i class="fa fa-tags"></i>
    <span class="label label-info"> <a href="https://vdanen.github.io/tag/gitlab.html"> gitlab</a></span>
    <span class="label label-info"> <a href="https://vdanen.github.io/tag/ci.html"> ci</a></span>
    <span class="label label-info"> <a href="https://vdanen.github.io/tag/docker.html"> docker</a></span>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><img alt="Image" src="https://vdanen.github.io/images/gitlab.png"></p>
<p>I've been using GitLab for a while now and I really like it.  I can't objectively say whether it's better than GitHub or not (I have a few projects on GitHub but I rarely make any changes to them and even more rarely use the web UI), but one of the things I appreciate about GitLab is the fact that I can run my own copy of it and store my own stuff in it.  I also use it every day for work and at home so am much more familiar with it than GitHub.</p>
<p>Recently I've been playing with the CI aspect of GitLab.  I've used Jenkins to handle "CI duties" in the past, and GitLab and Jenkins work quite well together, but I wanted to play around with GitLab's built-in CI because of how tightly integrated it is (and since I run a small GitLab here at home, I can use the same system for my runners and don't have to worry about setting up Jenkins).</p>
<p>I found it quite easy to setup, although there are a few things to be aware of and I wanted to note them here.  Partly so if I need to do it again in the future it'll be easy for me to refer to.</p>
<p>Create the user to run the service:</p>
<div class="highlight"><pre><span></span><code># groupadd -g 2001 otter
# useradd -u 2001 -g 2001 -d /srv/www/otter -s /bin/bash otter
# chmod 0711 /srv/www/otter
</code></pre></div>

<p>The above creates the "otter" user and group which will run the service and makes <em>/srv/www/otter</em> traversable since we will checkout the git repository (as user otter) and it will live in <em>/srv/www/otter/otter/</em>:</p>
<div class="highlight"><pre><span></span><code># su - otter
$ mkdir otter
$ cd otter
$ git clone https://[gitlab-url]/otter.git
</code></pre></div>

<p>This project is public so there is no need for authentication.  If you had a private project you could still authenticate over HTTPS by creating a <em>~/.netrc</em> file that looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">machine</span><span class="w"> </span><span class="o">[</span><span class="n">gitlab-host</span><span class="o">]</span><span class="w"></span>
<span class="n">login</span><span class="w"> </span><span class="o">[</span><span class="n">gitlab-user</span><span class="o">]</span><span class="w"></span>
<span class="n">password</span><span class="w"> </span><span class="o">[</span><span class="n">password</span><span class="o">]</span><span class="w"></span>
</code></pre></div>

<p>After this I added the otter user to <em>/etc/sudoers</em> to be able to restart the otter.service but that didn't work out so well.  When I used the following in <em>.gitlab-ci.yml</em>:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nl">script</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">otter</span><span class="nv">@production</span><span class="p">.</span><span class="k">host</span><span class="w"> </span><span class="ss">&quot;cd otter &amp;&amp; git pull &amp;&amp; sudo /bin/systemctl restart otter.service&quot;</span><span class="w"></span>
</code></pre></div>

<p>Because the CI does not allocate a pseudo-terminal, which is ultimately required for sudo (even though we set up the private key without a password), the deployment failed.  This means that while we can deploy the new code via calling <strong>git pull</strong>, we cannot restart the gunicorn daemon that is serving the content.  A work-around for this is to setup a cronjob to run every minute and look for a specific file, since we can easily do something like <strong>touch /srv/www/otter/otter.restart</strong> with our ssh call after doing the git pull.  So editing <em>/etc/crontab</em> and adding:</p>
<div class="highlight"><pre><span></span><code>* * * * * root test -f /srv/www/otter/otter.restart &amp;&amp; /bin/systemctl restart otter.service &amp;&amp; rm -f /srv/www/otter/otter.restart
</code></pre></div>

<p>does the trick.  This actually is a bit nicer than trying to use sudo because it's still only root that can restart the service and given <em>/srv/www/otter</em> is writable only by the otter user, and outside the git repository, nothing else that isn't either a root or otter process can create the file.  This removes the need to change anything in <em>/etc/sudoers</em> or give this user any kind of special permissions.  The downside is this will add an entry every minute to <em>/var/log/cron</em>, but change the threshold to whatever you want (i.e. use "*/5" to check every 5 minutes if preferred).</p>
<p>To use this, the <em>.gitlab-ci.yml</em> file was updated to:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nl">script</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">otter</span><span class="nv">@production</span><span class="p">.</span><span class="k">host</span><span class="w"> </span><span class="ss">&quot;cd otter &amp;&amp; git pull &amp;&amp; touch /srv/www/otter/otter.restart&quot;</span><span class="w"></span>
</code></pre></div>

<p>Obviously there are other considerations that can and should be done here.  For instance, if you have database changes, the above isn't sufficient for an automatic deployment so a script to make changes to the database as part of the deployment would probably be good.  This could be an external script or something that your systemd initscript handles, or the web application itself.  One thought that comes to mind is to use a table in the database for configuration information and store a version in the database that can be compared and if less than what the script expects, automatically perform the migration at start.  (Note to self, I should implement this...)</p>
<p>For reference, the full <em>.gitlab-ci.yml</em> file looks like:</p>
<div class="highlight"><pre><span></span><code><span class="n">image</span><span class="o">:</span><span class="w"> </span><span class="n">centos</span><span class="o">:</span><span class="mi">7</span><span class="w"></span>

<span class="n">stages</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">test</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">deploy</span><span class="w"></span>

<span class="n">before_script</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">agent</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">installed</span><span class="o">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">docker</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="s1">&#39;which ssh-agent || ( yum install openssh-clients -y )&#39;</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">agent</span><span class="w"> </span><span class="o">(</span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">environment</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nf">eval</span><span class="w"> </span><span class="n">$</span><span class="o">(</span><span class="n">ssh</span><span class="o">-</span><span class="n">agent</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">SSH_PRIVATE_KEY</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">store</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">add</span><span class="w"> </span><span class="o">&lt;(</span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;$SSH_PRIVATE_KEY&quot;</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">builds</span><span class="w"> </span><span class="n">disable</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">checking</span><span class="w"> </span><span class="n">although</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">lead</span><span class="w"> </span><span class="n">to</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">mitm</span><span class="w"> </span><span class="n">attacks</span><span class="o">;</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">config</span><span class="o">!</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">~/.</span><span class="n">ssh</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="s1">&#39;[[ -f /.dockerenv ]] &amp;&amp; echo -e &quot;Host *\n\tStrictHostKeyChecking no\n\n&quot; &gt; ~/.ssh/config&#39;</span><span class="w"></span>

<span class="n">test</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">stage</span><span class="o">:</span><span class="w"> </span><span class="n">test</span><span class="w"></span>
<span class="w">    </span><span class="n">script</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">https</span><span class="o">://</span><span class="n">dl</span><span class="o">.</span><span class="na">fedoraproject</span><span class="o">.</span><span class="na">org</span><span class="sr">/pub/epel/</span><span class="n">epel</span><span class="o">-</span><span class="n">release</span><span class="o">-</span><span class="n">latest</span><span class="o">-</span><span class="mi">7</span><span class="o">.</span><span class="na">noarch</span><span class="o">.</span><span class="na">rpm</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">mariadb</span><span class="o">-</span><span class="n">devel</span><span class="w"> </span><span class="n">mariadb</span><span class="o">-</span><span class="n">server</span><span class="w"> </span><span class="n">python</span><span class="o">-</span><span class="n">virtualenv</span><span class="w"> </span><span class="n">python</span><span class="o">-</span><span class="n">pip</span><span class="w"> </span><span class="n">gcc</span><span class="w"> </span><span class="n">gcc</span><span class="o">-</span><span class="n">c</span><span class="o">++</span><span class="w"> </span><span class="n">freetype</span><span class="o">-</span><span class="n">devel</span><span class="w"> </span><span class="n">libpng</span><span class="o">-</span><span class="n">devel</span><span class="w"> </span><span class="n">python</span><span class="o">-</span><span class="n">requests</span><span class="w"> </span><span class="n">MySQL</span><span class="o">-</span><span class="n">python</span><span class="w"> </span><span class="n">mailx</span><span class="w"> </span><span class="n">python</span><span class="o">-</span><span class="n">simplejson</span><span class="w"> </span><span class="n">vim</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="n">mod_wsgi</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">sh</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="na">sh</span><span class="w"></span>

<span class="n">production</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">stage</span><span class="o">:</span><span class="w"> </span><span class="n">deploy</span><span class="w"></span>
<span class="w">    </span><span class="n">script</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">otter</span><span class="err">@</span><span class="n">production</span><span class="o">.</span><span class="na">host</span><span class="w"> </span><span class="s2">&quot;cd otter &amp;&amp; git pull &amp;&amp; touch /srv/www/otter/otter.restart&quot;</span><span class="w"></span>
<span class="w">    </span><span class="n">only</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="n">master</span><span class="w"></span>
<span class="w">    </span><span class="n">environment</span><span class="o">:</span><span class="w"> </span><span class="n">production</span><span class="w"></span>
</code></pre></div>

<p>The key is handled using a project variable in GitLab which can be set by going to the project in question, clicking the gear icon and selecting "Variables".  You want to add a variable named <strong>SSH_PRIVATE_KEY</strong> with the contents of a private key you generate.  The corresponding public key would be added to the <em>~/.ssh/authorized_keys</em> file for, in this case, the otter user on "production.host".  You can read more about <a href="https://docs.gitlab.com/ce/ci/variables/README.html" target="_blank">GitLab variables</a>.</p>
<p>Finally, and I mention this because I found using systemd's initscripts a little bit painful at first (especially with mod_uwsgi, which is why I opted to use gunicorn and mod_proxy instead, see <a href="https://annvix.com/blog/current-progress-of-new-blog-platform">my earlier blog post about this</a> for more details), I leave you with the service scripts.  There are two scripts in question, the <em>otter.socket</em> and the <em>otter.service</em> scripts.</p>
<p><em>otter.socket</em> sets up the listeners:</p>
<div class="highlight"><pre><span></span><code><span class="k">[Unit]</span><span class="w"></span>
<span class="na">Description</span><span class="o">=</span><span class="s">otter socket</span><span class="w"></span>

<span class="k">[Socket]</span><span class="w"></span>
<span class="na">ListenStream</span><span class="o">=</span><span class="s">/run/otter/socket</span><span class="w"></span>
<span class="na">ListenStream</span><span class="o">=</span><span class="s">0.0.0.0:5000</span><span class="w"></span>

<span class="k">[Install]</span><span class="w"></span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">sockets.target</span><span class="w"></span>
</code></pre></div>

<p>and <em>otter.service</em> runs the gunicorn service:</p>
<div class="highlight"><pre><span></span><code><span class="k">[Unit]</span><span class="w"></span>
<span class="na">Description</span><span class="o">=</span><span class="s">otter daemon</span><span class="w"></span>
<span class="na">Requires</span><span class="o">=</span><span class="s">otter.socket</span><span class="w"></span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target</span><span class="w"></span>

<span class="k">[Service]</span><span class="w"></span>
<span class="na">PIDFile</span><span class="o">=</span><span class="s">/run/otter/pid</span><span class="w"></span>
<span class="na">User</span><span class="o">=</span><span class="s">otter</span><span class="w"></span>
<span class="na">Group</span><span class="o">=</span><span class="s">otter</span><span class="w"></span>
<span class="na">WorkingDirectory</span><span class="o">=</span><span class="s">/srv/www/otter/otter</span><span class="w"></span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/srv/www/otter/otter/flask/bin/gunicorn --pid /run/otter/pid --access-logfile /srv/www/otter/otter.log app:app</span><span class="w"></span>
<span class="na">ExecReload</span><span class="o">=</span><span class="s">/bin/kill -s HUP $MAINPID</span><span class="w"></span>
<span class="na">ExecStop</span><span class="o">=</span><span class="s">/bin/kill -s TERM $MAINPID</span><span class="w"></span>
<span class="na">PrivateTmp</span><span class="o">=</span><span class="s">true</span><span class="w"></span>

<span class="k">[Install]</span><span class="w"></span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span><span class="w"></span>
</code></pre></div>

<p>These files need to live in <em>/etc/systemd/system/</em> and are enabled using:</p>
<div class="highlight"><pre><span></span><code># systemctl enable otter.socket
# systemctl enable otter.service
</code></pre></div>

<p>I also have a <em>/etc/tmpfiles.d/otter.conf</em> for the socket file:</p>
<div class="highlight"><pre><span></span><code>d /run/otter 0755 otter otter -
</code></pre></div>

<p>Which can be setup using:</p>
<div class="highlight"><pre><span></span><code># systemd-tmpfiles --create
</code></pre></div>

<p>You'd want to do that before starting the services for the first time.</p>
<p>Hopefully this is helpful for someone who is interested in running a Flask application as a service under systemd with some CI integration using GitLab.  It covers a little bit more than just using GitLab CI to deploy remotely, although all the pieces are tied together and it seemed odd to focus on the one part of the picture without giving some details on the rest to make things work.  One thing I did consider is making the systemd services to be user services so that the otter user could <strong>systemctl restart otter.service</strong> but I didn't really get around to it and it didn't really matter to me (perhaps something to fiddle with in the future).</p>
<p>I'd love any feedback or ideas for improvement.  This is all pretty new to me yet so undoubtably there are ways these can be implemented better, but this works and I felt like sharing.  =)</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://twitter.com/vdanen"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
    <li class="list-group-item"><a href="https://github.com/vdanen"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
    <li class="list-group-item"><a href="https://www.linkedin.com/in/vdanen/"><i class="fa fa-linkedin-square fa-lg"></i> Linkedin</a></li>
    <li class="list-group-item"><a href="https://www.flickr.com/photos/wulfheart"><i class="fa fa-flickr fa-lg"></i> Flickr</a></li>
    <li class="list-group-item"><a href="https://infosec.exchange/@vdanen"><i class="fa fa-mastodon-square fa-lg"></i> Mastodon</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Categories -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4>
  <ul class="list-group" id="categories">
    <li class="list-group-item">
      <a href="https://vdanen.github.io/category/bsd.html"><i class="fa fa-folder-open fa-lg"></i>Bsd</a>
    </li>
    <li class="list-group-item">
      <a href="https://vdanen.github.io/category/christianity.html"><i class="fa fa-folder-open fa-lg"></i>Christianity</a>
    </li>
    <li class="list-group-item">
      <a href="https://vdanen.github.io/category/life.html"><i class="fa fa-folder-open fa-lg"></i>Life</a>
    </li>
    <li class="list-group-item">
      <a href="https://vdanen.github.io/category/linux.html"><i class="fa fa-folder-open fa-lg"></i>Linux</a>
    </li>
    <li class="list-group-item">
      <a href="https://vdanen.github.io/category/macos.html"><i class="fa fa-folder-open fa-lg"></i>Macos</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Categories -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="https://vdanen.github.io/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group list-inline tagcloud" id="tags">
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/ads.html">ads</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/aide.html">aide</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/aidegpg.html">AIDE+gpg</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/annvix.html">annvix</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/apache.html">apache</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/authentication.html">authentication</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/backup.html">backup</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/blocking.html">blocking</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/bugzilla.html">bugzilla</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/centos.html">centos</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/christianity.html">christianity</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/christmas.html">christmas</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/ci.html">ci</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/containers.html">containers</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/couchdb.html">couchdb</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/cvss.html">cvss</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/dash.html">dash</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/deception.html">deception</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/dns.html">dns</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/dnsmasq.html">dnsmasq</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/docker.html">docker</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/documentation.html">documentation</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/egypt.html">egypt</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/email.html">email</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/facebook.html">facebook</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/faith.html">faith</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/fedora.html">fedora</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/fink.html">fink</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/firewall.html">firewall</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/firewalld.html">firewalld</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/flask.html">flask</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/freenas.html">freenas</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/git.html">git</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/git-notifier.html">git-notifier</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/gitlab.html">gitlab</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/gmail.html">gmail</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/gpg.html">gpg</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/grub.html">grub</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/gtd.html">gtd</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/halloween.html">halloween</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/heartbleed.html">heartbleed</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/inkdrop.html">inkdrop</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/iohyve.html">iohyve</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/ipa.html">ipa</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/iptables.html">iptables</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/israel.html">israel</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/jordan.html">jordan</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/kerberos.html">kerberos</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/komodo.html">komodo</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/kvm.html">kvm</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/launchbar.html">launchbar</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/ldap.html">ldap</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/leadership.html">leadership</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/linux.html">linux</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/mailmate.html">mailmate</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/mandriva.html">mandriva</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/mod_rewrite.html">mod_rewrite</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/mutt.html">mutt</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/mysql.html">mysql</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/nagios.html">nagios</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/named.html">named</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/nfs.html">nfs</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/openssf.html">openssf</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/openssh.html">openssh</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/openssl.html">openssl</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/openvpn.html">openvpn</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/pfsense.html">pfsense</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/plex.html">plex</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/python.html">python</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/raid.html">raid</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/redhat.html">redhat</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/relationship.html">relationship</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/religion.html">religion</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/remotee.html">remotee</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/rhel.html">rhel</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/rpm.html">rpm</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/samba.html">samba</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/screen.html">screen</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/security.html">security</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/selinux.html">selinux</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/shell.html">shell</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/ssd.html">ssd</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/ssl.html">ssl</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/subversion.html">subversion</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/sudo.html">sudo</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/supplychain.html">supplychain</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/tattoo.html">tattoo</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://vdanen.github.io/tag/techmail.html">techmail</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/theology.html">theology</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/truenas.html">truenas</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/twitter.html">twitter</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/usg.html">usg</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/video.html">video</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/vim.html">vim</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/vmware.html">vmware</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/vpn.html">vpn</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/whiskeyjack.html">whiskeyjack</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://vdanen.github.io/tag/yearend.html">yearend</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://vdanen.github.io/tag/yubikey.html">yubikey</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://vdanen.github.io/tag/yum.html">yum</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://christcity.com/" target="_blank">Christcity</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.redhat.com/" target="_blank">Red Hat</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container-fluid">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 Vincent Danen
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://vdanen.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://vdanen.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://vdanen.github.io/theme/js/respond.min.js"></script>


    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5JGVD90SKJ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-5JGVD90SKJ');
    </script>


</body>
</html>